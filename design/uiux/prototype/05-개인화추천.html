<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°œì¸í™” ì¶”ì²œ - PhoneMart</title>
    <link rel="stylesheet" href="common.css">
    <style>
        .recommendation-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .page-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .page-title {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .page-subtitle {
            font-size: 1.2rem;
            color: #7f8c8d;
        }

        .settings-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .settings-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .setting-group {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
        }

        .setting-label {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .budget-slider {
            width: 100%;
            margin: 10px 0;
        }

        .budget-range {
            display: flex;
            justify-content: space-between;
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .budget-value {
            color: #e74c3c;
            font-weight: 600;
            text-align: center;
            margin-top: 10px;
        }

        .brand-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .brand-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .brand-checkbox:hover {
            background: #e8f4f8;
        }

        .brand-checkbox input[type="checkbox"] {
            transform: scale(1.2);
        }

        .purpose-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .purpose-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .purpose-option:hover {
            background: #e8f4f8;
        }

        .purpose-option input[type="radio"] {
            transform: scale(1.2);
        }

        .high-score-filter {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px;
            background: #e8f4f8;
            border-radius: 10px;
            margin-top: 20px;
        }

        .high-score-filter input[type="checkbox"] {
            transform: scale(1.3);
        }

        .high-score-filter label {
            font-weight: 600;
            color: #2980b9;
        }

        .recommendations-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .recommendations-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .recommendation-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .recommendation-card {
            border: 2px solid #e8f4f8;
            border-radius: 15px;
            padding: 20px;
            background: white;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .recommendation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .recommendation-rank {
            position: absolute;
            top: -5px;
            left: -5px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 10px 15px;
            border-radius: 0 0 15px 0;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .recommendation-card.rank-1 .recommendation-rank {
            background: linear-gradient(135deg, #f1c40f, #f39c12);
        }

        .recommendation-card.rank-2 .recommendation-rank {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
        }

        .recommendation-card.rank-3 .recommendation-rank {
            background: linear-gradient(135deg, #e67e22, #d35400);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .product-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .product-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 15px;
        }

        .personalized-score {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 10px;
            background: #e8f4f8;
            border-radius: 8px;
        }

        .personalized-score-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2980b9;
        }

        .score-label {
            font-size: 0.9rem;
            color: #34495e;
        }

        .recommendation-reason {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 0 8px 8px 0;
        }

        .reason-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .reason-text {
            color: #34495e;
            line-height: 1.4;
        }

        .card-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .btn-detail {
            flex: 1;
            padding: 10px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .btn-detail:hover {
            background: #2980b9;
        }

        .btn-cart {
            flex: 1;
            padding: 10px;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .btn-cart:hover {
            background: #229954;
        }

        .btn-reason {
            padding: 10px 15px;
            background: #95a5a6;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }

        .btn-reason:hover {
            background: #7f8c8d;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #7f8c8d;
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .empty-message {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .loading-state {
            text-align: center;
            padding: 40px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .recommendation-container {
                padding: 15px;
            }

            .page-title {
                font-size: 2rem;
            }

            .settings-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .brand-options,
            .purpose-options {
                grid-template-columns: 1fr;
            }

            .recommendation-cards {
                grid-template-columns: 1fr;
            }

            .card-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-container">
            <div class="logo">
                <a href="01-ë©”ì¸ëŒ€ì‹œë³´ë“œ.html">ğŸ“± PhoneMart</a>
            </div>
            <nav class="nav">
                <a href="02-ê²€ìƒ‰ê²°ê³¼.html">ê²€ìƒ‰</a>
                <a href="05-ê°œì¸í™”ì¶”ì²œ.html" class="active">ì¶”ì²œ</a>
                <a href="09-ì¥ë°”êµ¬ë‹ˆ.html">ì¥ë°”êµ¬ë‹ˆ</a>
                <a href="08-ë§ˆì´í˜ì´ì§€.html">ë§ˆì´í˜ì´ì§€</a>
            </nav>
            <div class="header-actions">
                <a href="07-ë¡œê·¸ì¸.html" class="btn-login">ë¡œê·¸ì¸</a>
                <div class="cart-icon">
                    <span class="cart-count">2</span>
                    ğŸ›’
                </div>
            </div>
        </div>
    </header>

    <main class="recommendation-container">
        <div class="page-header">
            <h1 class="page-title">ê°œì¸í™” ì¶”ì²œ</h1>
            <p class="page-subtitle">ë‹¹ì‹ ì˜ ì„ í˜¸ë„ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë§ì¶¤í˜• í•¸ë“œí°ì„ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤</p>
        </div>

        <div class="settings-section">
            <h2 class="settings-title">
                âš™ï¸ ì¶”ì²œ ì„¤ì •
            </h2>
            <div class="settings-grid">
                <div class="setting-group">
                    <div class="setting-label">ğŸ’° ì˜ˆì‚° ë²”ìœ„</div>
                    <input type="range" class="budget-slider" id="budgetSlider"
                           min="100000" max="2000000" step="50000" value="800000">
                    <div class="budget-range">
                        <span>10ë§Œì›</span>
                        <span>200ë§Œì›</span>
                    </div>
                    <div class="budget-value" id="budgetValue">80ë§Œì›</div>
                </div>

                <div class="setting-group">
                    <div class="setting-label">ğŸ“± ì„ í˜¸ ë¸Œëœë“œ</div>
                    <div class="brand-options">
                        <label class="brand-checkbox">
                            <input type="checkbox" name="brand" value="samsung">
                            <span>ì‚¼ì„±</span>
                        </label>
                        <label class="brand-checkbox">
                            <input type="checkbox" name="brand" value="apple">
                            <span>ì• í”Œ</span>
                        </label>
                        <label class="brand-checkbox">
                            <input type="checkbox" name="brand" value="lg">
                            <span>LG</span>
                        </label>
                        <label class="brand-checkbox">
                            <input type="checkbox" name="brand" value="xiaomi">
                            <span>ìƒ¤ì˜¤ë¯¸</span>
                        </label>
                    </div>
                </div>

                <div class="setting-group">
                    <div class="setting-label">ğŸ¯ ì£¼ìš” ìš©ë„</div>
                    <div class="purpose-options">
                        <label class="purpose-option">
                            <input type="radio" name="purpose" value="gaming">
                            <span>ê²Œì„</span>
                        </label>
                        <label class="purpose-option">
                            <input type="radio" name="purpose" value="photo">
                            <span>ì‚¬ì§„</span>
                        </label>
                        <label class="purpose-option">
                            <input type="radio" name="purpose" value="work">
                            <span>ì—…ë¬´</span>
                        </label>
                        <label class="purpose-option">
                            <input type="radio" name="purpose" value="general" checked>
                            <span>ì¼ë°˜</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="high-score-filter">
                <input type="checkbox" id="highScoreOnly" checked>
                <label for="highScoreOnly">ğŸ† ê³ ë“ì  ìƒí’ˆë§Œ ë³´ê¸° (70ì  ì´ìƒ)</label>
            </div>
        </div>

        <div class="recommendations-section">
            <h2 class="recommendations-title">
                ğŸ¯ ë§ì¶¤ ì¶”ì²œ ìƒí’ˆ
            </h2>

            <div id="recommendationResults">
                <div class="loading-state">
                    <div class="spinner"></div>
                    <p>ê°œì¸í™” ì¶”ì²œì„ ê³„ì‚°í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>PhoneMart</h3>
                    <p>ê°€ì„±ë¹„ ì¢‹ì€ í•¸ë“œí°ì„ ì°¾ëŠ” ê°€ì¥ ë˜‘ë˜‘í•œ ë°©ë²•</p>
                </div>
                <div class="footer-section">
                    <h4>ê³ ê°ì„¼í„°</h4>
                    <p>1588-1234</p>
                    <p>í‰ì¼ 09:00-18:00</p>
                </div>
                <div class="footer-section">
                    <h4>ì •ë³´</h4>
                    <a href="#">ì´ìš©ì•½ê´€</a>
                    <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- ìƒì„¸ ì´ìœ  ëª¨ë‹¬ -->
    <div id="reasonModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="reasonModalTitle">ì¶”ì²œ ìƒì„¸ ì´ìœ </h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body" id="reasonModalBody">
                <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ë‚´ìš© -->
            </div>
        </div>
    </div>

    <script src="common.js"></script>
    <script>
        // ì¶”ì²œ ìƒí’ˆ ë°ì´í„°
        const recommendationData = {
            gaming: [
                {
                    id: 1,
                    name: "iPhone 15 Pro Max 256GB",
                    price: "1,690,000ì›",
                    originalPrice: "1,790,000ì›",
                    image: "https://via.placeholder.com/300x200/4a90e2/white?text=iPhone+15+Pro+Max",
                    personalizedScore: 92,
                    generalScore: 88,
                    reason: "ê°•ë ¥í•œ A17 Pro ì¹©ê³¼ ë†’ì€ ì£¼ì‚¬ìœ¨ ë””ìŠ¤í”Œë ˆì´ë¡œ ê²Œì„ ì„±ëŠ¥ì´ ë›°ì–´ë‚¨",
                    detailedReason: {
                        performance: "A17 Pro ì¹©ì…‹ìœ¼ë¡œ ìµœê³  ìˆ˜ì¤€ì˜ ê²Œì„ ì„±ëŠ¥ ì œê³µ",
                        display: "120Hz ProMotion ë””ìŠ¤í”Œë ˆì´ë¡œ ë¶€ë“œëŸ¬ìš´ ê²Œì„ í”Œë ˆì´",
                        thermal: "í–¥ìƒëœ ì¿¨ë§ ì‹œìŠ¤í…œìœ¼ë¡œ ì¥ì‹œê°„ ê²Œì„ í”Œë ˆì´ ê°€ëŠ¥",
                        battery: "4441mAh ë°°í„°ë¦¬ë¡œ ê²Œì„ ì¤‘ ì¶©ë¶„í•œ ì‚¬ìš© ì‹œê°„ ë³´ì¥"
                    },
                    matchReason: "ê²Œì„ ìš©ë„ì™€ ì„ íƒí•œ ë¸Œëœë“œ ì„ í˜¸ë„ë¥¼ ë°˜ì˜í•˜ì—¬ ì¶”ì²œ"
                },
                {
                    id: 2,
                    name: "ê°¤ëŸ­ì‹œ S24 Ultra 512GB",
                    price: "1,590,000ì›",
                    originalPrice: "1,698,400ì›",
                    image: "https://via.placeholder.com/300x200/1abc9c/white?text=Galaxy+S24+Ultra",
                    personalizedScore: 89,
                    generalScore: 85,
                    reason: "Snapdragon 8 Gen 3ì™€ ëŒ€í˜• ë””ìŠ¤í”Œë ˆì´ë¡œ ëª°ì…ê° ìˆëŠ” ê²Œì„ ê²½í—˜",
                    detailedReason: {
                        performance: "Snapdragon 8 Gen 3ìœ¼ë¡œ ê³ ì‚¬ì–‘ ê²Œì„ ì™„ë²½ ì§€ì›",
                        display: "6.8ì¸ì¹˜ Dynamic AMOLED 2Xë¡œ ë„“ì€ í™”ë©´ê³¼ ìƒìƒí•œ ìƒ‰ê°",
                        features: "Síœ ì§€ì›ìœ¼ë¡œ ê²Œì„ ì™¸ ì¶”ê°€ ê¸°ëŠ¥ í™œìš© ê°€ëŠ¥",
                        cooling: "ë² ì´í¼ ì±”ë²„ ì¿¨ë§ìœ¼ë¡œ ë°œì—´ ê´€ë¦¬ ìš°ìˆ˜"
                    },
                    matchReason: "ì˜ˆì‚° ë²”ìœ„ ë‚´ì—ì„œ ìµœê³ ì˜ ê²Œì„ ì„±ëŠ¥ì„ ì œê³µ"
                }
            ],
            photo: [
                {
                    id: 3,
                    name: "iPhone 15 Pro 128GB",
                    price: "1,350,000ì›",
                    originalPrice: "1,450,000ì›",
                    image: "https://via.placeholder.com/300x200/e74c3c/white?text=iPhone+15+Pro",
                    personalizedScore: 94,
                    generalScore: 87,
                    reason: "48MP ë©”ì¸ ì¹´ë©”ë¼ì™€ ì „ë¬¸ì ì¸ ì‚¬ì§„ í¸ì§‘ ê¸°ëŠ¥ìœ¼ë¡œ ì™„ë²½í•œ ì‚¬ì§„ ì´¬ì˜",
                    detailedReason: {
                        camera: "48MP ë©”ì¸, 12MP ì´ˆê´‘ê°, 12MP ë§ì› íŠ¸ë¦¬í”Œ ì¹´ë©”ë¼",
                        features: "ì•¡ì…˜ ë²„íŠ¼ê³¼ ProRAWë¡œ ì „ë¬¸ê°€ê¸‰ ì‚¬ì§„ ì´¬ì˜",
                        video: "4K ProRes ë¹„ë””ì˜¤ ë…¹í™” ì§€ì›",
                        editing: "ê°•ë ¥í•œ ì´ë¯¸ì§€ ì²˜ë¦¬ ì—”ì§„ê³¼ í¸ì§‘ ì•± ìƒíƒœê³„"
                    },
                    matchReason: "ì‚¬ì§„ ì´¬ì˜ì— ìµœì í™”ëœ ì¹´ë©”ë¼ ì‹œìŠ¤í…œê³¼ í¸ì§‘ ê¸°ëŠ¥"
                }
            ],
            work: [
                {
                    id: 4,
                    name: "ê°¤ëŸ­ì‹œ S24+ 256GB",
                    price: "1,180,000ì›",
                    originalPrice: "1,279,400ì›",
                    image: "https://via.placeholder.com/300x200/9b59b6/white?text=Galaxy+S24%2B",
                    personalizedScore: 88,
                    generalScore: 83,
                    reason: "ëŒ€ìš©ëŸ‰ ë°°í„°ë¦¬ì™€ ë©€í‹°íƒœìŠ¤í‚¹ ìµœì í™”ë¡œ ì—…ë¬´ íš¨ìœ¨ì„± ê·¹ëŒ€í™”",
                    detailedReason: {
                        productivity: "DeX ëª¨ë“œë¡œ PC ìˆ˜ì¤€ì˜ ì—…ë¬´ í™˜ê²½ êµ¬ì¶•",
                        battery: "4900mAh ëŒ€ìš©ëŸ‰ ë°°í„°ë¦¬ë¡œ ì¥ì‹œê°„ ì—…ë¬´ ê°€ëŠ¥",
                        multitasking: "12GB RAMìœ¼ë¡œ ì—¬ëŸ¬ ì•± ë™ì‹œ ì‹¤í–‰ ì›í™œ",
                        security: "Knox ë³´ì•ˆ í”Œë«í¼ìœ¼ë¡œ ê¸°ì—… ìˆ˜ì¤€ ë³´ì•ˆ"
                    },
                    matchReason: "ì—…ë¬´ ìƒì‚°ì„±ê³¼ ë³´ì•ˆì„ ëª¨ë‘ ê³ ë ¤í•œ ìµœì ì˜ ì„ íƒ"
                }
            ],
            general: [
                {
                    id: 5,
                    name: "ê°¤ëŸ­ì‹œ A55 128GB",
                    price: "549,000ì›",
                    originalPrice: "599,400ì›",
                    image: "https://via.placeholder.com/300x200/f39c12/white?text=Galaxy+A55",
                    personalizedScore: 85,
                    generalScore: 82,
                    reason: "í•©ë¦¬ì ì¸ ê°€ê²©ì— ê· í˜•ì¡íŒ ì„±ëŠ¥ìœ¼ë¡œ ì¼ìƒ ì‚¬ìš©ì— ìµœì ",
                    detailedReason: {
                        value: "ê°€ê²© ëŒ€ë¹„ ë›°ì–´ë‚œ ì„±ëŠ¥ê³¼ ê¸°ëŠ¥",
                        camera: "50MP ë©”ì¸ ì¹´ë©”ë¼ë¡œ ì¼ìƒ ì‚¬ì§„ ì´¬ì˜ ì¶©ë¶„",
                        battery: "5000mAh ë°°í„°ë¦¬ë¡œ í•˜ë£¨ ì¢…ì¼ ì‚¬ìš© ê°€ëŠ¥",
                        design: "í”„ë¦¬ë¯¸ì—„ ë””ìì¸ê³¼ ë‚´êµ¬ì„±"
                    },
                    matchReason: "ì˜ˆì‚° ë²”ìœ„ ë‚´ì—ì„œ ê°€ì„±ë¹„ê°€ ê°€ì¥ ë›°ì–´ë‚œ ëª¨ë¸"
                },
                {
                    id: 6,
                    name: "iPhone 14 128GB",
                    price: "950,000ì›",
                    originalPrice: "1,050,000ì›",
                    image: "https://via.placeholder.com/300x200/3498db/white?text=iPhone+14",
                    personalizedScore: 83,
                    generalScore: 80,
                    reason: "iOS ìƒíƒœê³„ì™€ ì•ˆì •ì ì¸ ì„±ëŠ¥ìœ¼ë¡œ ì¼ìƒ ì‚¬ìš©ì— ì™„ë²½",
                    detailedReason: {
                        ecosystem: "ì• í”Œ ìƒíƒœê³„ì™€ì˜ ì™„ë²½í•œ ì—°ë™",
                        performance: "A15 Bionicìœ¼ë¡œ ì¼ìƒ ì‚¬ìš©ì— ì¶©ë¶„í•œ ì„±ëŠ¥",
                        update: "ì¥ê¸°ê°„ iOS ì—…ë°ì´íŠ¸ ì§€ì› ë³´ì¥",
                        quality: "ë›°ì–´ë‚œ ë¹Œë“œ í’ˆì§ˆê³¼ ë¸Œëœë“œ ì‹ ë¢°ì„±"
                    },
                    matchReason: "ì•ˆì •ì„±ê³¼ ë¸Œëœë“œ ì„ í˜¸ë„ë¥¼ ê³ ë ¤í•œ ì¶”ì²œ"
                }
            ]
        };

        let currentRecommendations = [];

        // DOM ìš”ì†Œë“¤
        const budgetSlider = document.getElementById('budgetSlider');
        const budgetValue = document.getElementById('budgetValue');
        const brandCheckboxes = document.querySelectorAll('input[name="brand"]');
        const purposeRadios = document.querySelectorAll('input[name="purpose"]');
        const highScoreOnly = document.getElementById('highScoreOnly');
        const recommendationResults = document.getElementById('recommendationResults');
        const reasonModal = document.getElementById('reasonModal');

        // ì˜ˆì‚° ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸
        budgetSlider.addEventListener('input', function() {
            const value = parseInt(this.value);
            budgetValue.textContent = (value / 10000) + 'ë§Œì›';
            updateRecommendations();
        });

        // ë¸Œëœë“œ ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸
        brandCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', updateRecommendations);
        });

        // ìš©ë„ ë¼ë””ì˜¤ ì´ë²¤íŠ¸
        purposeRadios.forEach(radio => {
            radio.addEventListener('change', updateRecommendations);
        });

        // ê³ ë“ì  í•„í„° ì´ë²¤íŠ¸
        highScoreOnly.addEventListener('change', updateRecommendations);

        // ì¶”ì²œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateRecommendations() {
            showLoading();

            // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œì„ ì‹œë®¬ë ˆì´ì…˜
            setTimeout(() => {
                const selectedPurpose = document.querySelector('input[name="purpose"]:checked').value;
                const budget = parseInt(budgetSlider.value);
                const selectedBrands = Array.from(brandCheckboxes)
                    .filter(cb => cb.checked)
                    .map(cb => cb.value);
                const onlyHighScore = highScoreOnly.checked;

                // ì¶”ì²œ ìƒí’ˆ í•„í„°ë§
                let recommendations = recommendationData[selectedPurpose] || recommendationData.general;

                // ì˜ˆì‚° í•„í„°ë§
                recommendations = recommendations.filter(product => {
                    const price = parseInt(product.price.replace(/[^0-9]/g, ''));
                    return price <= budget;
                });

                // ê³ ë“ì  í•„í„°ë§
                if (onlyHighScore) {
                    recommendations = recommendations.filter(product => product.personalizedScore >= 70);
                }

                // ë¸Œëœë“œ í•„í„°ë§ (ë¸Œëœë“œê°€ ì„ íƒëœ ê²½ìš°)
                if (selectedBrands.length > 0) {
                    recommendations = recommendations.filter(product => {
                        const productBrand = product.name.toLowerCase();
                        return selectedBrands.some(brand => {
                            if (brand === 'samsung') return productBrand.includes('ê°¤ëŸ­ì‹œ');
                            if (brand === 'apple') return productBrand.includes('iphone');
                            if (brand === 'lg') return productBrand.includes('lg');
                            if (brand === 'xiaomi') return productBrand.includes('ìƒ¤ì˜¤ë¯¸');
                            return false;
                        });
                    });
                }

                currentRecommendations = recommendations;
                displayRecommendations(recommendations);
            }, 1500);
        }

        // ë¡œë”© ìƒíƒœ í‘œì‹œ
        function showLoading() {
            recommendationResults.innerHTML = `
                <div class="loading-state">
                    <div class="spinner"></div>
                    <p>ê°œì¸í™” ì¶”ì²œì„ ê³„ì‚°í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
                </div>
            `;
        }

        // ì¶”ì²œ ê²°ê³¼ í‘œì‹œ
        function displayRecommendations(recommendations) {
            if (recommendations.length === 0) {
                recommendationResults.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ”</div>
                        <div class="empty-message">ì„ íƒí•œ ì¡°ê±´ì— ë§ëŠ” ì¶”ì²œ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤</div>
                        <p>í•„í„° ì¡°ê±´ì„ ì¡°ì •í•´ë³´ì„¸ìš”</p>
                    </div>
                `;
                return;
            }

            const cardsHtml = recommendations.map((product, index) => `
                <div class="recommendation-card rank-${index + 1}">
                    <div class="recommendation-rank">#${index + 1}</div>
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-name">${product.name}</div>
                    <div class="product-price">
                        ${product.price}
                        ${product.originalPrice ? `<span style="text-decoration: line-through; color: #95a5a6; font-size: 0.9rem; margin-left: 10px;">${product.originalPrice}</span>` : ''}
                    </div>
                    <div class="personalized-score">
                        <div class="personalized-score-value">${product.personalizedScore}ì </div>
                        <div class="score-label">
                            ê°œì¸í™” ì ìˆ˜<br>
                            <small>(ì¼ë°˜: ${product.generalScore}ì )</small>
                        </div>
                    </div>
                    <div class="recommendation-reason">
                        <div class="reason-title">ğŸ¯ ì¶”ì²œ ì´ìœ </div>
                        <div class="reason-text">${product.reason}</div>
                    </div>
                    <div class="card-actions">
                        <button class="btn-detail" onclick="goToProductDetail(${product.id})">ìƒì„¸ë³´ê¸°</button>
                        <button class="btn-cart" onclick="addToCart(${product.id})">ì¥ë°”êµ¬ë‹ˆ</button>
                        <button class="btn-reason" onclick="showDetailedReason(${product.id})">ìì„¸í•œ ì´ìœ </button>
                    </div>
                </div>
            `).join('');

            recommendationResults.innerHTML = `
                <div class="recommendation-cards">
                    ${cardsHtml}
                </div>
            `;
        }

        // ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ ì´ë™
        function goToProductDetail(productId) {
            window.location.href = `03-ìƒí’ˆìƒì„¸.html?id=${productId}`;
        }

        // ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€
        function addToCart(productId) {
            const product = currentRecommendations.find(p => p.id === productId);
            if (product) {
                // ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€í•˜ëŠ” ë¡œì§
                showNotification(`${product.name}ì„(ë¥¼) ì¥ë°”êµ¬ë‹ˆì— ë‹´ì•˜ìŠµë‹ˆë‹¤!`);

                // ì¹´íŠ¸ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
                const cartCount = document.querySelector('.cart-count');
                if (cartCount) {
                    const currentCount = parseInt(cartCount.textContent);
                    cartCount.textContent = currentCount + 1;
                }
            }
        }

        // ìƒì„¸í•œ ì¶”ì²œ ì´ìœ  ëª¨ë‹¬
        function showDetailedReason(productId) {
            const product = currentRecommendations.find(p => p.id === productId);
            if (!product) return;

            const modalTitle = document.getElementById('reasonModalTitle');
            const modalBody = document.getElementById('reasonModalBody');

            modalTitle.textContent = `${product.name} ì¶”ì²œ ì´ìœ `;

            const detailedReasonHtml = Object.entries(product.detailedReason)
                .map(([key, value]) => {
                    const keyLabels = {
                        performance: 'ğŸš€ ì„±ëŠ¥',
                        display: 'ğŸ“º ë””ìŠ¤í”Œë ˆì´',
                        camera: 'ğŸ“¸ ì¹´ë©”ë¼',
                        battery: 'ğŸ”‹ ë°°í„°ë¦¬',
                        features: 'âœ¨ íŠ¹ì§•',
                        thermal: 'ğŸŒ¡ï¸ ë°œì—´ ê´€ë¦¬',
                        cooling: 'â„ï¸ ì¿¨ë§',
                        productivity: 'ğŸ’¼ ìƒì‚°ì„±',
                        multitasking: 'ğŸ”„ ë©€í‹°íƒœìŠ¤í‚¹',
                        security: 'ğŸ”’ ë³´ì•ˆ',
                        value: 'ğŸ’° ê°€ì„±ë¹„',
                        design: 'ğŸ¨ ë””ìì¸',
                        ecosystem: 'ğŸ”— ìƒíƒœê³„',
                        update: 'ğŸ”„ ì—…ë°ì´íŠ¸',
                        quality: 'â­ í’ˆì§ˆ',
                        video: 'ğŸ¥ ë¹„ë””ì˜¤',
                        editing: 'âœï¸ í¸ì§‘'
                    };

                    return `
                        <div style="margin-bottom: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <h4 style="color: #2c3e50; margin-bottom: 8px;">${keyLabels[key] || key}</h4>
                            <p style="color: #34495e; margin: 0; line-height: 1.4;">${value}</p>
                        </div>
                    `;
                })
                .join('');

            modalBody.innerHTML = `
                <div style="margin-bottom: 20px; padding: 15px; background: #e8f4f8; border-radius: 8px;">
                    <h4 style="color: #2980b9; margin-bottom: 8px;">ğŸ¯ ë§¤ì¹­ ê·¼ê±°</h4>
                    <p style="color: #34495e; margin: 0; line-height: 1.4;">${product.matchReason}</p>
                </div>
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #2c3e50; margin-bottom: 15px;">ğŸ“Š ìƒì„¸ ë¶„ì„</h4>
                    ${detailedReasonHtml}
                </div>
                <div style="padding: 15px; background: #e8f5e8; border-radius: 8px;">
                    <h4 style="color: #27ae60; margin-bottom: 8px;">ğŸ’¡ ê²°ë¡ </h4>
                    <p style="color: #2e7d32; margin: 0; line-height: 1.4; font-weight: 500;">
                        ì„ íƒí•˜ì‹  ${document.querySelector('input[name="purpose"]:checked').nextElementSibling.textContent} ìš©ë„ì—
                        ê°œì¸í™” ì ìˆ˜ ${product.personalizedScore}ì ìœ¼ë¡œ ê°€ì¥ ì í•©í•œ ìƒí’ˆì…ë‹ˆë‹¤.
                    </p>
                </div>
            `;

            reasonModal.style.display = 'block';
        }

        // ëª¨ë‹¬ ë‹«ê¸° ì´ë²¤íŠ¸
        document.querySelector('.close').addEventListener('click', function() {
            reasonModal.style.display = 'none';
        });

        window.addEventListener('click', function(event) {
            if (event.target === reasonModal) {
                reasonModal.style.display = 'none';
            }
        });

        // ì•Œë¦¼ ë©”ì‹œì§€ í‘œì‹œ
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #27ae60;
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
            `;
            notification.textContent = message;

            // ìŠ¬ë¼ì´ë“œ ì¸ ì• ë‹ˆë©”ì´ì…˜
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
                style.remove();
            }, 3000);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ì¶”ì²œ í‘œì‹œ
        document.addEventListener('DOMContentLoaded', function() {
            updateRecommendations();
        });
    </script>
</body>
</html>